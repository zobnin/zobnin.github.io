<p>
В связи с не утихающей шумихой вокруг вопроса "Почему ребята с форумов xda-developers и команд типа CyanogenMod и AOKP выпускают обновления до новых версий Android быстрее самих компаний-производителей смартфонов?", я решил написать эту небольшую статью, в которой немного приоткрою завесу тайны над тем как на самом деле происходит обновление смартфонов и почему компании просто по определнию не могут быть быстрее сторонних разработчиков.
</p>

::cut::

<h3>Постановка проблемы</h3>
<p>
Всем нам известна скорость, с которой появляются неофициальные порты новой версии Android после публикации ее исходных текстов компанией Google. Первые полурабочие прошивки часто появляются спустя каких-то несколько дней, а уже через месяц мы имеем доступ к полнофункциональному порту. Это тот же срок, в течение которого большинство производителей едва успевают принять решение о том, на какие свои смартфоны они планируют перенос новой версии системы, не говоря уже о самом процессе портирования, который обычно затягивается на срок от нескольких месяцев до полугода и дольше.
</p></p>
При этом энтузиасты способны портировать новые версии Android даже на те устройства, которые были признаны несовместимыми с новой ОС самими же компаниями-производителями. А последние не только не делают этого, но и не объясняют причины отказа в продолжении поддержки своих устройств. Неужели все дело в жадности компаний-производителей, стимулирующих покупателей бежать в магазин за новой моделью смартфона? Или может быть дело в наплевательском отношении к потребителю? Или же энтузиасты действительно настолько лучше программстов компаний-производителей? Тогда почему последние не нанимают на работу первых?
</p>
<h3>Удовольствие и работа</h3>
<p>
Все эти факторы скорее всего имеют место быть в реальности, но не подумайте что они имеют сколько-нибудь определяющее значение. Дело совершенно в другом, в том, о чем просто не говорят потребителям. Это <b>подходы к разработке ПО</b>, а если точнее, сами причины выполнения порта и процесс его выполнения. Понять их достаточно просто если задать соответствующие вопросы.
</p><p>
<b>Вопрос первый: зачем выполняется порт?</b> В случае с энтузиастами все просто: развлечение. Человек с xda-developers, портирующий Android на свой девайс, делает это, как говорится, "Just for fun". Вопросы о том, будет ли этот порт целесообразным, сможет ли система правильно работать на данной модели, сколько сил на это придется потратить, обычно не задаются. Человек просто идет за исходными текстами и начинает работу.
</p>
<img src="/uploads/oem-vs-custom1.png">
<p>
Для компании-производителя все гораздо сложнее. Для ее руководства существенными являются множество факторов, начиная от вопроса о том, стоит ли овчинка выделки (будет ли оправдано портирование Android 4.0 на девайс с 512 Мб памяти?) и заканчивая такими вопросами как "правильное распределение ресурсов" (может быть стоит бросить все силы на как можно более быстрое выполнение порта для самых новых моделей, чем распылять силы на все?). В большинстве случаев это выбор между уменьшением расходов и сохранением лица перед клиентами, а если точнее удержание баланса где-то посередине.
</p><p>
На этом начинаются первые различия. В то время как программист-энтузиаст уже готов представить первую "альфу" (или даже "бету"), инженеры компании-производителя до сих пор занимаются исследованием кода нового Android и оценкой его пригодности для конкретной модели, а рукводство продолжает ломать голову над вышеозначенными вопросами. Часто в дело вступает бюрократия, а также болезнь IT-компаний под названием "некомпетентность верхушек". Где-то все это выражено более ярко, где-то менее, но такое свойственно всем компаниям и <b>это нормально</b>, это и есть то, на чем держится бизнес.
</p><p>
<b>Вопрос второй: как происходит портирование?</b> Здесь история еще забавней. Человек, выполняющий портирование на чистом энтузиазме, не так часто задумывается о таких вопросах как совместимость, отсутствие мелких багов, провалы производительсти в каких-то очень специфических приложениях и т.д. Все это, если и проявляется, зачищается уже после выкладывания им первых версий прошивок, помеченных как стабильные. И процесс этот может занимать очень значительное время. Часто отлов мельчайших багов, не проявляющихся у 99% пользователей, может продолжаться месяцы, а многие из них не будут найдены никогда.
</p>
<img src="/uploads/oem-vs-custom2.jpg">
<p>
Для компаний-производителей процесс работы над прошивкой выглядит совершенно иначе. И начинается он с постановки задачи, которая гласит, что <b>новая прошивка должна быть не хуже старой</b>. Или, говоря другими словами, установивший новую прошивку пользователь ни в коем случае не должен захотеть вернуться на старую, иначе он начнет поливать компанию грязью еще сильней, чем в случае если бы обновление вообще не произошло. Прошивка должна быть полностью стабильной, со всех сторон протестированной, работать не медленнее предыдущей и оставлять лучшие впечатления от использования.
</p><p>
Это главная задача и, собственно говоря, сама причина выполнения порта. Там, где программист-энтузиаст может выкатить прошивку с небольшими багами, ухудшением производительности и частично неработающим функционалом (не работает панорамная съемка, многих это остановит?) и все равно получит в свой адрес благодарности, компания ни в коем случае не может допустить всего этого даже в гораздо меньшем масштабе. И чем известней брэнд тем жестче требования.
</p>
<img src="/uploads/oem-vs-custom3.jpg">
<p>
Чтобы достичь этого необходимы несколько команд программистов, инженеров и тестировщиков, одна из которых будет заниматься портированием, другая - тестированием прошивки на производительность и совместимость с приложениями, третья - оценивать общие впечатления от использования. Часто командам придется действовать в кооперации для нахождения наиболее приемлемого способа решения очередной технической головоломки. Все это очень длительный и кропотливый процесс, особенно когда речь заходит о том, чтобы, например, выполнить порт Android 4 на устаревший смартфон.
</p><p>
Так, чтобы обеcпечить работу Ice Cream Sandwich на Xperia Play, компании Sony пришлось приложить немало усилий, оптимизируя буквально все компоненты ОС так, чтобы свести потребление памяти к минимуму и обеспечить пользователю такой же комфорт как при использовании Android 2.3. К слову сказать в то время уже существовал неофициальный порт Android 4 без всех этих модификаций и работал он хорошо, но <b>не давал такого же эффекта</b> как от использования Android 2.3. Вроде бы все хорошо, а свободной памяти все равно мало, фоновые приложения быстрее выгружаются в результате чего возникает большая задержка при переходе к ранее открытым программам из-за необходимости их повторного запуска.
</p>
<img src="/uploads/oem-vs-custom4.jpg">
<p>
Чтобы обеспечить нормальное функционирование всех игр на том же Xperia Play Sony пришлось всесторонее тестировать чуть ли не все игры из маркета, а при возникновении проблем связываться с каждой компанией-разработчиком сбойной игры с целью совместно найти решение проблемы. Стоит ли говорить насколько это трудоемкий и затягивающий разработку процесс. А при этом требовалось еще и тестирование приложений и проверка новой прошивки на фокус-группе, которая должна была ежедневно пользоваться обновленным смартфоном на протяжении какого-то времени.
</p><p>
В конце-концов из-за небольших проблем в общем впечатлении от использования и совместимости с некоторыми играми, компании пришлось отказаться от официального OTA-обновления смартфона и она просто выложила последнюю бету в открытый доступ. Любой владелец Xperia Play может скачать ее и воочию убедится в ее превосходной стабильности и производительности, однако для Sony весь процесс по сути оказался пустой тратой времени.
</p><p>
<b>Вопрос третий: когда прошивка становится доступной пользователям?</b> Энтузиаст всегда имеет очень большое преимущество перед компанией-производителем так как может поделиться прошивкой уже на ранней стадии работы, благодаря чему баги будут выявлены очень быстро, а к разработке смогут присоединится другие разработчики.
</p><p>
У компании-производителя таких преимуществ нет. От начала и до конца разработка ведется закрыто и только после преодоления большого количества проблем и доведения прошивки до почти приемлемого состояния они могут поделиться бета-версией с небольшим количестом тестеров. Другими словами, там где у программстов-энтузиастов есть тысячи советчиков и тестеров самой разной квалификации по всему миру, у компании - только собственные ресурсы. Само собой такое положение вещей тоже затягивает разработку.
</p><p>
Ну и наконец представьте, что при всем при этом компании еще необходимо портировать в новую версию ОС собственную оболочку, реализовать фирменную функциональность, котороя будет отличать "их Android" от всех остальных андройдов и вы получите те самые пол года, а может даже и год.
</p>

